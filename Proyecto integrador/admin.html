<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel del Administrador</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>

<body class="bg-light">

  <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #071f8c;">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <img src="/images/log.png" alt="Logo" width="40" height="40" class="d-inline-block align-text-top me-2">
                <span class="fw-bold fs-5" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
                    Univ. Salesiana - Ing. Sistemas
                </span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#navbarNav" aria-controls="navbarNav" 
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/index.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Titulacion</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Carreras</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contacto</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/login.html">Acceder</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

  <div class="container mt-5">
    <h2 class="text-center mb-4">Panel de Administraci√≥n</h2>
    <!-- Inicio de la las etapas -->
     <div class="container mt-4">
      <div class="card mb-4">
        <div class="header-azul-amarillo">Seguimiento del Proceso de Titulaci√≥n</div>
        <div class="card-body">
          <!-- Buscar estudiante por RU -->
          <div class="row g-3 align-items-end">
            <div class="col-md-6 col-lg-4">
              <label for="ruEstudiante" class="form-label">RU del Estudiante:</label>
              <input type="text" id="ruEstudiante" class="form-control" placeholder="Ej: 202201234" required />
            </div>
            <div class="col-md-6 col-lg-3">
              <button class="btn btn-outline-amarillo mt-2 w-100" onclick="buscarEstudiante()">Buscar</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Mostrar datos del estudiante -->
      <div id="datosEstudiante" class="card mb-4" style="display: none;">
        <div class="header-azul-amarillo">Datos del Estudiante</div>
        <div class="card-body">
          <div class="row mb-3">
            <div class="col-md-6">
              <p><strong>Nombre:</strong> <span id="nombreEstudiante"></span></p>
            </div>
            <div class="col-md-6">
              <p><strong>RU:</strong> <span id="ruMostrado"></span></p>
            </div>
          </div>

          <!-- Fila: Asignar Paralelo -->
          <div class="row align-items-end mb-4">
            <div class="col-md-6 col-lg-4">
              <label for="paraleloAsignado" class="form-label">Asignar Paralelo:</label>
              <select class="form-select" id="paraleloAsignado">
                <option value="" disabled selected>-- Selecciona un paralelo --</option>
              </select>
            </div>
            <div class="col-md-4 col-lg-3">
              <button class="btn btn-outline-amarillo w-100 mt-3 mt-md-0" onclick="asignarParalelo()">Guardar Paralelo</button>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6">
              <p><strong>Tutor asignado:</strong> <span id="nombreTutorAsignado" class="text-primary">No asignado</span></p>
            </div>
            <div class="col-md-6">
              <p><strong>Relator asignado:</strong> <span id="nombreRelatorAsignado" class="text-primary">No asignado</span></p>
            </div>
          </div>
          <!-- Fila: Asignar Tutor y Relator -->
          <div class="row align-items-end">
            <div class="col-md-6 col-lg-4 mb-3">
              <label for="tutorAsignado" class="form-label">Asignar Tutor:</label>
              <select class="form-select" id="tutorAsignado">
                <option value="" disabled selected>-- Selecciona un tutor --</option>
              </select>
            </div>
            <div class="col-md-6 col-lg-4 mb-3">
              <label for="relatorAsignado" class="form-label">Asignar Relator:</label>
              <select class="form-select" id="relatorAsignado">
                <option value="" disabled selected>-- Selecciona un relator --</option>
              </select>
            </div>
            <div class="col-md-6 col-lg-3 mb-3">
              <button class="btn btn-outline-amarillo w-100 mt-lg-3" onclick="asignarDocentes()">Guardar Docentes</button>
            </div>
          </div>
        </div>
      </div>


      <!-- Seguimiento por etapas -->
      <div id="contenedorEtapas" class="card mb-4">
        <div class="header-azul-amarillo">Etapas del Proceso</div>
        <div class="card-body">
          <div id="listaEtapas" class="table-responsive">
            <!-- Aqu√≠ se generan din√°micamente las etapas -->
          </div>
        </div>
      </div>
    </div>


    <!-- F de la las etapas-->

    <div class="d-flex justify-content-between mb-3">
      <button class="btn btn-success" id="btnMostrarFormulario">‚ûï Registrar Usuario</button>
      <button id="btnCerrarSesion" class="btn btn-danger" onclick="cerrarSesion()">Cerrar sesi√≥n</button>
    </div>

    <!-- üìã FORMULARIO DE REGISTRO -->
    <div id="formularioRegistro" class="card p-4 mb-4 d-none">
      <h4>Registrar nuevo usuario</h4>
      <div class="row g-3">
        <div class="col-md-4">
          <label for="rol" class="form-label">Rol</label>
          <select id="rol" class="form-select">
            <option value="estudiante">Estudiante</option>
            <option value="docente">Docente</option>
          </select>
        </div>
        <div class="col-md-4">
          <label for="nombres" class="form-label">Nombres</label>
          <input type="text" id="nombres" class="form-control">
        </div>
        <div class="col-md-4">
          <label for="apellidos" class="form-label">Apellidos</label>
          <input type="text" id="apellidos" class="form-control">
        </div>
        <div class="col-md-4">
          <label for="ru" class="form-label">RU</label>
          <input type="text" id="ru" class="form-control">
        </div>
        <div class="col-md-4">
          <label for="carnet" class="form-label">Carnet</label>
          <input type="text" id="carnet" class="form-control">
        </div>
        <div class="col-md-4">
          <label for="correo" class="form-label">Correo</label>
          <input type="email" id="correo" class="form-control">
        </div>
        <div class="col-md-4 estudiante-campo">
          <label for="carrera" class="form-label">Carrera</label>
          <select id="carrera" class="form-select">
            <option value="">Seleccione una carrera</option>
            <option value="Ciencias de la Educaci√≥n">Ciencias de la Educaci√≥n</option>
            <option value="Contadur√≠a P√∫blica">Contadur√≠a P√∫blica</option>
            <option value="Derecho">Derecho</option>
            <option value="Psicomotricidad, Salud, Educaci√≥n y Deportes">Psicomotricidad, Salud, Educaci√≥n y Deportes</option>
            <option value="Ingenier√≠a de Sistemas">Ingenier√≠a de Sistemas</option>
            <option value="Gastronom√≠a y Gesti√≥n de Restaurantes">Gastronom√≠a y Gesti√≥n de Restaurantes</option>
            <option value="Educaci√≥n Parvularia">Educaci√≥n Parvularia</option>
            <option value="Educaci√≥n Especial Inclusiva">Educaci√≥n Especial Inclusiva</option>
            <option value="Pedagog√≠a de Atenci√≥n al Adulto Mayor">Pedagog√≠a de Atenci√≥n al Adulto Mayor</option>
          </select>
        </div>
        <div class="col-md-4 docente-campo d-none">
          <label for="especialidad" class="form-label">Especialidad</label>
          <input type="text" id="especialidad" class="form-control">
        </div>
        <div class="col-md-4 docente-campo d-none">
          <label for="paralelo" class="form-label">Paralelo</label>
          <input type="text" id="paralelo" class="form-control">
        </div>
        <div class="col-md-4">
          <label for="celular" class="form-label">Celular</label>
          <input type="text" id="celular" class="form-control">
        </div>
        <div class="col-12">
          <button class="btn btn-primary" id="btnGuardarUsuario">Guardar</button>
        </div>
      </div>
    </div>

    <!-- LISTADOS -->
    <div class="container mt-5">

      <!-- Estudiantes -->
      <div class="card shadow mb-4 border-0">
        <div class="card-header header-azul-amarillo d-flex justify-content-between align-items-center rounded-top">
          <h5 class="mb-0">Estudiantes</h5>
          <div>
            <button class="btn-sm btn-outline-amarillo" onclick="mostrarFormulario('estudiante')">
              ‚ûï Agregar
            </button>
            <button class="btn btn-sm btn-outline-warning" data-bs-toggle="collapse" data-bs-target="#estudiantesCollapse">
              Mostrar/Ocultar
            </button>
          </div>
        </div>
        <div id="estudiantesCollapse" class="collapse show">
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table table-hover table-striped table-bordered mb-0 text-center">
                <thead class="thead-azul-amarillo">
                  <tr>
                    <th>Nombre</th>
                    <th>RU</th>
                    <th>Email</th>
                    <th>Carrera</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="tablaEstudiantes"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Docentes -->
      <div class="card shadow border-0">
        <div class="card-header header-azul-amarillo d-flex justify-content-between align-items-center rounded-top">
          <h5 class="mb-0">Docentes</h5>
          <div>
            <button class="btn-sm btn-outline-amarillo" onclick="mostrarFormulario('docente')">
              ‚ûï Agregar
            </button>
            <button class="btn btn-sm btn-outline-warning" data-bs-toggle="collapse" data-bs-target="#docentesCollapse">
              Mostrar/Ocultar
            </button>
          </div>
        </div>
        <div class="collapse show" id="docentesCollapse">
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table table-hover table-striped table-bordered mb-0 text-center">
                <thead class="thead-azul-amarillo">
                  <tr>
                    <th>Nombre</th>
                    <th>RU</th>
                    <th>Email</th>
                    <th>Especialidad</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="tablaDocentes"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Formulario oculto de creaci√≥n/edici√≥n -->
      <div id="formularioUsuario" class="card mt-4 d-none">
        <div class="card-header bg-warning text-dark">
          <strong id="formularioTitulo">Nuevo Usuario</strong>
        </div>
        <div class="card-body">
          <form id="formUsuario">
            <input type="hidden" id="tipoUsuario"> <!-- estudiante o docente -->
            <div class="row g-3">
              <div class="col-md-6">
                <label for="nombres" class="form-label">Nombres</label>
                <input type="text" id="nombresEdi" class="form-control" required>
              </div>
              <div class="col-md-6">
                <label for="apellidos" class="form-label">Apellidos</label>
                <input type="text" id="apellidosEdi" class="form-control" required>
              </div>
              <div class="col-md-4">
                <label for="ru" class="form-label">RU</label>
                <input type="text" id="ruEdi" class="form-control" required>
              </div>
              <div class="col-md-4">
                <label for="carnet" class="form-label">Carnet</label>
                <input type="text" id="carnetEdi" class="form-control" required>
              </div>
              <div class="col-md-4">
                <label for="email" class="form-label">Correo</label>
                <input type="email" id="emailEdi" class="form-control" required>
              </div>
              <div class="col-md-6 estudiante-campo">
                <label for="carrera" class="form-label">Carrera</label>
                <input type="text" id="carreraEdi" class="form-control">
              </div>
              <div class="col-md-6 docente-campo d-none">
                <label for="especialidad" class="form-label">Especialidad</label>
                <input type="text" id="especialidadEdi" class="form-control">
              </div>
            </div>
            <div class="mt-4 text-end">
              <button type="submit" class="btn btn-dark">Guardar</button>
              <button type="button" class="btn btn-secondary" onclick="ocultarFormulario()">Cancelar</button>
            </div>
          </form>
        </div>
      </div>

    </div>

    <!-- LISTADOS -->

    <!-- Etapas -->
    <div class="container mt-5">
     <div class="card shadow mb-4 border-0">
      <div class="card-header header-azul-amarillo d-flex justify-content-between align-items-center rounded-top">
        <h5 class="mb-0">Administrar Etapas</h5>
        <div>
          <button class="btn-sm btn-outline-amarillo" onclick="mostrarFormularioEtapa()">
            ‚ûï Agregar Etapa
          </button>
          <button class="btn btn-sm btn-outline-warning" data-bs-toggle="collapse" data-bs-target="#etapasCollapse">
            Mostrar/Ocultar
          </button>
        </div>
      </div>

      <div class="collapse show" id="etapasCollapse">
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover table-striped table-bordered mb-0 text-center">
              <thead class="thead-azul-amarillo">
                <tr>
                  <th>Nombre Etapa</th>
                  <th>Orden</th>
                  <th>Estado 1¬™ Entrega</th>
                  <th>Fecha L√≠mite 1¬™ Entrega</th>
                  <th>Estado 2¬™ Entrega</th>
                  <th>Fecha L√≠mite 2¬™ Entrega</th>
                  <th>Estado Entrega Final</th>
                  <th>Fecha L√≠mite Entrega Final</th>
                  <th>Paralelo</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="tablaEtapas">
                <!-- Aqu√≠ se cargan las etapas din√°micamente -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Formulario oculto inicialmente -->
        <div class="card-body border-top" id="formularioEtapaContainer" style="display:none;">
          <form id="formEtapa">

            <input type="hidden" id="etapaId" />

            <div class="mb-3">
              <label for="nombreEtapa" class="form-label">Nombre de la Etapa:</label>
              <input type="text" class="form-control" id="nombreEtapa" placeholder="Ej: Entrega de perfil" required />
            </div>

            <div class="mb-3">
              <label for="orden" class="form-label">Orden:</label>
              <input type="number" class="form-control" id="orden" min="1" value="1" required />
            </div>

            <div class="row g-3 mb-3">
              <div class="col-md-4">
                <label for="estadoPrimeraEntrega" class="form-label">Estado 1¬™ Entrega:</label>
                <select class="form-select" id="estadoPrimeraEntrega" required>
                  <option value="" disabled selected>-- Seleccione --</option>
                  <option value="Pendiente">Pendiente</option>
                  <option value="Completado">Completado</option>
                </select>
              </div>
              <div class="col-md-8">
                <label for="fechaLimitePrimeraEntrega" class="form-label">Fecha L√≠mite 1¬™ Entrega:</label>
                <input type="date" class="form-control" id="fechaLimitePrimeraEntrega" required />
              </div>
            </div>

            <div class="row g-3 mb-3">
              <div class="col-md-4">
                <label for="estadoSegundaEntrega" class="form-label">Estado 2¬™ Entrega:</label>
                <select class="form-select" id="estadoSegundaEntrega" required>
                  <option value="" disabled selected>-- Seleccione --</option>
                  <option value="Pendiente">Pendiente</option>
                  <option value="Completado">Completado</option>
                </select>
              </div>
              <div class="col-md-8">
                <label for="fechaLimiteSegundaEntrega" class="form-label">Fecha L√≠mite 2¬™ Entrega:</label>
                <input type="date" class="form-control" id="fechaLimiteSegundaEntrega" required />
              </div>
            </div>

            <div class="row g-3 mb-3">
              <div class="col-md-4">
                <label for="estadoEntregaFinal" class="form-label">Estado Entrega Final:</label>
                <select class="form-select" id="estadoEntregaFinal" required>
                  <option value="" disabled selected>-- Seleccione --</option>
                  <option value="Pendiente">Pendiente</option>
                  <option value="Completado">Completado</option>
                </select>
              </div>
              <div class="col-md-8">
                <label for="fechaLimiteEntregaFinal" class="form-label">Fecha L√≠mite Entrega Final:</label>
                <input type="date" class="form-control" id="fechaLimiteEntregaFinal" required />
              </div>
            </div>

            <div class="mb-3">
              <label for="paralelo" class="form-label">Paralelo:</label>
              <input type="text" class="form-control" id="paraleloEtapa" placeholder="Ej: A, B, C..." required />
            </div>

            <div class="text-end">
              <button type="submit" class="btn btn-primary me-2" id="btnGuardarEtapa">Guardar</button>
              <button type="button" class="btn btn-secondary" id="btnCancelarEdicion" onclick="ocultarFormularioEtapa()">Cancelar</button>
            </div>
          </form>

        </div>
      </div>
    </div>
    </div>
    <!-- etapas -->

    <!-- SeguiT -->

    <!-- SeguiT Fin-->


  </div>

    <footer class="text-center mt-5 py-3" style="background-color:#f7d023; font-weight: bold; font-style: italic; color: #07418C;">
        <small>&copy; 2025 Carrera de Ingenier√≠a en Sistemas - Universidad Salesiana</small>
    </footer>


  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="admin.js"></script>
</body>
</html>


